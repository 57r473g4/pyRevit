<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Adding your own scripts</title>
  <meta name="description" content="IronPython scripts for Autodesk Revit
">

  <link rel="stylesheet" href="/pyRevit/css/main.css">
  <link rel="canonical" href="http://eirannejad.github.io/pyRevit/howtoaddscriptsandtabs/">
  <link rel="alternate" type="application/rss+xml" title="pyRevit blog" href="http://eirannejad.github.io/pyRevit/feed.xml">
  <link rel="stylesheet" href="/pyRevit/css/styles.css">
</head>

  <body>
    <header class="site-header"></header>
    <div class="wrapper">
      <header class="sidebar">
        <a href="/pyRevit/">
          <img class="logo" src="/pyRevit/pyRevitLogo.svg">
        </a>
        <p><a class="site-title" href="/pyRevit/">pyRevit blog</a></p>

        <p>IronPython scripts for Autodesk Revit
</p>

        <ul>
          <li><a href="https://github.com/eirannejad/pyRevit/releases/download/v2Setup/pyRevitPackage.zip">Download <strong>Installer</strong></a></li>
          <li><a href="https://github.com/eirannejad/pyRevit">View On <strong>GitHub</strong></a></li>
        </ul>

        <div class="trigger">
          
            
            <p class="menu-item"><a class="page-link" href="/pyRevit/whatspyrevit/">What's pyRevit</a></p>
            
          
            
            <p class="menu-item"><a class="page-link" href="/pyRevit/installation/">Installation and Removal</a></p>
            
          
            
            <p class="menu-item"><a class="page-link" href="/pyRevit/howtouse/">Using and staying updated</a></p>
            
          
            
            <p class="menu-item"><a class="page-link" href="/pyRevit/howtoaddscriptsandtabs/">Adding your own scripts</a></p>
            
          
            
            <p class="menu-item"><a class="page-link" href="/pyRevit/contribute/">Contribute</a></p>
            
          
            
            <p class="menu-item"><a class="page-link" href="/pyRevit/releasenotes/">Release Notes</a></p>
            
          
            
            <p class="menu-item"><a class="page-link" href="/pyRevit/credits/">Credits</a></p>
            
          
            
          
            
          
            
          
        </div>
        <p></p>
      </header>
      <section>
        <div class="page-content">
            <article class="post">

  <!-- <header class="post-header">
    <h1 class="post-title">Adding your own scripts</h1>
  </header> -->

  <div class="post-content">
    <h2 id="adding-your-own-scripts">Adding your own scripts:</h2>

<p>The <code class="highlighter-rouge">__init__.py</code> startup script will setup a ribbon panel named ‘pyRevit’ (After the folder name that contains the scripts). There are 5 ways to add buttons to this ribbon panel and categorize them under sub-panels.</p>

<p>…</p>

<h4 id="all-the-methods-listed-below-require-a-32x32-pixel-png-image-file-that-will-be-used-as-the-icon-for-the-button-or-button-group-if-youre-creating-your-own-icons-in-photoshop-just-use-save-for-web-legacy-png-8-otherwise-the-icon-might-be-displayed-larger-than-expected">All the methods listed below, require a 32x32 pixel <code class="highlighter-rouge">.png</code> image file that will be used as the icon for the button or button group. If you’re creating your own icons, in Photoshop, just use Save For Web, Legacy PNG-8. Otherwise the icon might be displayed larger than expected.</h4>

<p>…</p>

<h3 id="creating-pull-down-buttons">Creating Pull Down Buttons:</h3>

<p><img src="http://eirannejad.github.io/pyRevit/images/pulldownbuttondemo.png" alt="PulldownDemo" /></p>

<ul>
  <li>
    <p><strong>Step 1:</strong> Create a <code class="highlighter-rouge">.png</code> file, with this naming pattern:
<code class="highlighter-rouge">&lt;00 Panel Order&gt;&lt;00 Button Order&gt;_&lt;Panel Name&gt;_PulldownButton_&lt;Button Group Name&gt;.png</code></p>

    <p><strong>Example:</strong><br />
<code class="highlighter-rouge">1003_Selection_PulldownButton_Filter.png</code><br />
This <code class="highlighter-rouge">.png</code> file, defines a sub-panel under <code class="highlighter-rouge">pyRevit</code> ribbon panel named <code class="highlighter-rouge">Selection</code>, and a <code class="highlighter-rouge">PulldownButton</code> named <code class="highlighter-rouge">Filter</code> under this panel. Startup script will use the order numbers to sort the panels and buttons and later to create them in order.</p>
  </li>
  <li>
    <p><strong>Step 2:</strong> All <code class="highlighter-rouge">.py</code> script under the home directory should have the below name pattern:
<code class="highlighter-rouge">&lt;Button Group Name&gt;_&lt;Script Command Name&gt;.py</code>.<br />
For the example above, any script that its name starts with <code class="highlighter-rouge">Filter_</code> will be added to this PullDown button.</p>
  </li>
</ul>

<p>Scripts will be organized under the group button specified in the source file name. For example a script file named <code class="highlighter-rouge">Filter_filterGroupedElements.py</code> will be placed under group button <code class="highlighter-rouge">Filter</code> (defined by the <code class="highlighter-rouge">.png</code> above) and its command name will be <code class="highlighter-rouge">filterGroupedElements</code>. The <code class="highlighter-rouge">.png</code> file defining the Pulldown Button will be used as button icon by default, however, if there is a <code class="highlighter-rouge">.png</code> file with a matching name to a script, that <code class="highlighter-rouge">.png</code> file will override the default image and will be used as the button icon.</p>

<h3 id="split-buttons-creating-pull-down-buttons-that-remember-the-last-clicked-button">Split Buttons: Creating Pull Down buttons that remember the last clicked button</h3>

<p>Same as Method 1 except it will create Split Buttons (The last selected sub-item will be the default active item).</p>

<p>For a SplitButton, create a <code class="highlighter-rouge">.png</code> file, with this naming pattern:
<code class="highlighter-rouge">&lt;00 Panel Order&gt;&lt;00 Button Order&gt;_&lt;Panel Name&gt;_SplitButton_&lt;Button Group Name&gt;.png</code></p>

<p><img src="http://eirannejad.github.io/pyRevit/images/splitbuttondemo.png" alt="SplitDemo" /></p>

<h3 id="creating-push-buttons">Creating Push Buttons:</h3>

<p><img src="http://eirannejad.github.io/pyRevit/images/pushbuttondemo.png" alt="PushbuttonDemo" /></p>

<ul>
  <li>
    <p><strong>Step 1:</strong> Create a <code class="highlighter-rouge">.png</code> file, with this naming pattern:
<code class="highlighter-rouge">&lt;00 Panel Order&gt;&lt;00 Button Order&gt;_&lt;Panel Name&gt;_PushButton_&lt;Push Button Name&gt;.png</code></p>

    <p><strong>Example:</strong><br />
  <code class="highlighter-rouge">1005_Revit_PushButton_Get Central Path.png</code> defines a sub-panel under <code class="highlighter-rouge">pyRevit</code> named <code class="highlighter-rouge">Revit</code>, and a simple Push Buttons in this panel named <code class="highlighter-rouge">BIM</code>. The startup script will expect to find only one script with name pattern similar to Method 1, and will assign it to this push button.</p>
  </li>
  <li>
    <p><strong>Step 2:</strong> All <code class="highlighter-rouge">.py</code> script under the home directory should have the below name pattern:
<code class="highlighter-rouge">&lt;Push Button Name&gt;_&lt;Script Name&gt;.py</code>.<br />
For the example above, <code class="highlighter-rouge">Get Central Path_action.py</code> will be assigned to the push button described above. Not that the The button name shown in the ribbon will be <code class="highlighter-rouge">Get Central Path</code> (<code class="highlighter-rouge">&lt;Push Button Name&gt;</code>) since this button only performs one action. The <code class="highlighter-rouge">&lt;Script Name&gt;</code> will be ignored.</p>
  </li>
</ul>

<h4 id="link-buttons-creating-push-buttons-that-run-other-addins-commands">Link Buttons: Creating Push Buttons that Run other Addin’s Commands</h4>

<p>This button is very similar to a PushButton except that it creates a link to a command of any other addin.<br />
Create a <code class="highlighter-rouge">.png</code> file, with the same naming pattern as Method 1, but also add <code class="highlighter-rouge">&lt;Assembly Name&gt;</code> and <code class="highlighter-rouge">&lt;C# Class Name&gt;</code> to the filename separated by <code class="highlighter-rouge">_</code>.</p>

<p><strong>Example:</strong><br />
<code class="highlighter-rouge">0000_RPS_PushButton_RPS_RevitPythonShell_IronPythonConsoleCommand.png</code></p>

<p>This defines a sub-panel under <code class="highlighter-rouge">pyRevit</code>, named <code class="highlighter-rouge">RPS</code>, and a simple Push Buttons in this panel, named <code class="highlighter-rouge">RPS</code>. But then the startup script will use the <code class="highlighter-rouge">&lt;Assembly Name&gt;</code> and <code class="highlighter-rouge">&lt;C# Class Name&gt;</code> and will look for the referenced addin and class. If this addin has been already loaded into Revit, the startup script will assign the <code class="highlighter-rouge">&lt;C# Class Name&gt;</code> to this button. In this example, startup script will create a button that opens the ‘Interactive Python Shell’ from RevitPythonShell addin.</p>

<p>Another example of this method is <code class="highlighter-rouge">0005_RL_PushButton_Lookup_RevitLookup_CmdSnoopDb.png</code> that will create a button calling the ‘Snoop DB’ command of the <a href="https://github.com/jeremytammik/RevitLookup">RevitLookup</a> addin.</p>

<p>Notice that this type of button does not need any external scripts. This single <code class="highlighter-rouge">.png</code> file has all the necessary information for this link button.</p>

<h3 id="creating-stack-of-push-buttons">Creating Stack of Push Buttons:</h3>

<p><img src="http://eirannejad.github.io/pyRevit/images/stackthreedemo.png" alt="Stack3Demo" /></p>

<ul>
  <li>
    <p><strong>Step 1:</strong> Create a <code class="highlighter-rouge">.png</code> file, with this naming pattern:
<code class="highlighter-rouge">&lt;00 Panel Order&gt;&lt;00 Button Order&gt;_&lt;Panel Name&gt;_Stack3_&lt;Stack Name&gt;.png</code></p>

    <p><strong>Example:</strong><br />
  <code class="highlighter-rouge">1005_Selection_Stack3_Inspect.png</code> defines a sub-panel under <code class="highlighter-rouge">pyRevit</code>named <code class="highlighter-rouge">Selection</code>, and 3 Stacked Buttons in this panel. For a Stack3 button group, the startup script will expect to find exactly 3 scripts to be categorized under this stack. The actual stack name will be ignored since the stack doesn’t have any visual representation other then the 3 buttons stacked in 3 rows.</p>
  </li>
  <li>
    <p><strong>Step 2:</strong> All <code class="highlighter-rouge">.py</code> script under the home directory should have the below name pattern:
<code class="highlighter-rouge">&lt;Button Group Name&gt;_&lt;Script Command Name&gt;.py</code>.<br />
In this example the 3 scripts below will be used to create 3 buttons in this stack (sorted alphabetically):</p>

    <p><code class="highlighter-rouge">Inspect_findLinkedElements.py</code><br />
  <code class="highlighter-rouge">Inspect_findListOfViewsShowingElement.py</code><br />
  <code class="highlighter-rouge">Inspect_findPaintedSurfacesOnSelected.py</code></p>
  </li>
</ul>

<h2 id="adding-your-own-tabs">Adding your own tabs:</h2>

<p>By default, the <code class="highlighter-rouge">__init__.py</code> script will load all the scripts inside the <code class="highlighter-rouge">pyRevit</code> folder provided in this repository. But the <code class="highlighter-rouge">__init__.py</code> script, will also look for other folders in its directory. This means that you can create other folders alongside the <code class="highlighter-rouge">__init__.py</code> and <code class="highlighter-rouge">pyRevit</code> and place your custom scripts under those. The <code class="highlighter-rouge">__init__.py</code> script will create a dedicated tab (with the folder name) for each of the folders that contains scripts, in Revit ribbon after <code class="highlighter-rouge">pyRevit</code> tab.</p>

<p>This is the preferred method for adding your custom scripts and categories to the pyRevit library. This way, the original pyRevit library can remain intact and always be updated from the github repository to the latest version.</p>

<h2 id="reloading-the-scripts-library">Reloading the scripts library:</h2>

<p><img src="http://eirannejad.github.io/pyRevit/images/reloadScripts.png" alt="ReloadScripts" /></p>

<p>pyRevit commands only keep a link to the actual IronPython script file. Revit reads and runs the script file any time the user clicks on the corresponding button. This means you can edit any script while Revit is running and the next time you click on the corresponding script button, Revit will run the modified script file.</p>

<p>If you added scripts or panels while Revit is running, use the <code class="highlighter-rouge">reloadScripts</code> button from the <code class="highlighter-rouge">Settings</code> group to reload the changes. It’ll search for the scripts and will update the buttons, disabling the missing and adding the newly found.</p>

  </div>

</article>

        </div>
      </section>
      <footer class="sidebar">
        <p><small>
          This project is maintained by <a href="https://github.com/eirannejad">eirannejad</a><br>
          subscribe <a href="/pyRevit/feed.xml">via RSS</a><br>
          Powered by GitHub Pages and Jekyll<br>
          Theme by <a href="https://github.com/orderedlist">orderedlist</a> with my mods
        </small></p>
      </footer>
    </div>
  </body>
</html>
